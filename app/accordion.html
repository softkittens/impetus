<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Impetus: accordion</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="min-h-dvh bg-white text-gray-900">
  <main class="mx-auto max-w-3xl p-6 space-y-8">
    <header class="space-y-2">
      <h1 class="text-2xl font-bold">Accordion</h1>
      <p class="text-sm text-gray-600">Accessible accordion using Impetus components.</p>
    </header>

    <!-- Host with inline template -->
    <div use="Accordion" class="max-w-2xl">
      <div class="divide-y divide-gray-200">
        <div class="py-2" @each="items as item,i">
          <button class="flex w-full items-center justify-between py-2 text-left"
                  aria-expanded="{openIndex===i}"
                  aria-controls="panel-{i}"
                  onclick="toggle(i)"
                  onkeydown="(($event.key==='Enter'||$event.key===' ') && (toggle(i)))">
            <span class="font-medium">{item.title}</span>
            <svg class="h-4 w-4 opacity-60" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.188l3.71-3.957a.75.75 0 111.08 1.04l-4.24 4.52a.75.75 0 01-1.08 0L5.25 8.27a.75.75 0 01-.02-1.06z" clip-rule="evenodd"/>
            </svg>
          </button>
          <div id="panel-{i}" class="grid transition-[grid-template-rows] duration-200 ease-out { openIndex===i ? 'grid-rows-[1fr] mt-2' : 'grid-rows-[0fr]' }">
            <div class="overflow-hidden text-sm text-gray-700">
              {item.content}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Logic -->
    <script>
      class Accordion {
        constructor(props = {}) {
          this.items = props.items ?? [
            { title: 'Section 1', content: 'Lorem ipsum dolor sit amet.' },
            { title: 'Section 2', content: 'Consectetur adipiscing elit.' },
            { title: 'Section 3', content: 'Sed do eiusmod tempor.' },
          ]
          this.openIndex = 0
        }
        toggle(i) { this.openIndex = (this.openIndex === i ? -1 : i) }
      }
    </script>

    <script type="module">
      import { init } from './impetus.js'
      init()
    </script>
  </main>
</body>
</html>
